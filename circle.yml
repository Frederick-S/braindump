test:
  post:
    - python manage.py test --coverage
    - git checkout -b gh_pages
    - git config --global user.email "lev@levlaz.org"
    - git config --global user.name "Lev Lazinskiy"
    - cp -R tmp/coverage/* .
    - git add -A
    - git commit -m 'Updated Coverage Reports'
    - git push -u origin gh_pages 

deployment:
  push_to_linode:
    branch: master
    commands:
      - rsync -avz app circle@braindump.pw:/var/www
      - rsync -avz *.{py,txt} circle@braindump.pw:/var/www
